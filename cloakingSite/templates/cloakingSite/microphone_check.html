{% extends "cloakingSite/base.html" %}
{% load static %}
{% block title %}Microphone check{% endblock %}
{% block content %}
    <h1>Microphone check</h1>
    <p>This page loads 'bad' content if a microphone is detected (note that virtual devices will be detected as well).
        Else it shows 'good' content.</p>
    <div id="content"></div>
{% endblock %}
{% block scripts %}
    <script src="{% static "js/DetectRTC.min.js" %}"></script>
    <script>
        $(window).on('load', (function () {
            DetectRTC.load(function () {
                if (DetectRTC.hasMicrophone)
                    $('#content').load('bad', {csrfmiddlewaretoken: "{{ csrf_token }}"});
                else
                    $('#content').load('good', {csrfmiddlewaretoken: "{{ csrf_token }}"});
            });
        }));
    </script>
{% endblock %}